# Bevali: Behaviour Validation Using Smart Contracts

This project aims to show the efficacy of using smart contracts for behaviour validation. Each component of the project is broken down into modules. 

* `bevali` module ties all the modules together to produce the instantiation for a runnable agent. 
* `blockchain` module contains all the class for creating a blockchain object and block objects. 
* `datahandler` module handles passing data from the networking module to the bevali module
* `encryption` module neatly wraps an cryptography library for ease of use
* `evaluation` contains the scripts to run throughput experiments
* `multithreading` module contains a class to manage threads to start and stop them during execution, as well as protected datastructures.
* `networking` module contains a class to perform P2P comms
* `tests` contains all the functional tests for the project
* `transactions` contains the class for transactions used by the bevali and handle the smart contract implementation

The source directory is such:
```
ğŸ“¦project
 â”£ğŸ“¦bevali
 â”ƒ  â”£ ğŸ“œbevali.py
 â”ƒ  â”— ğŸ“œ__init__.py
 â”£ğŸ“¦blockchain
 â”ƒ  â”£ ğŸ“œblock.py
 â”ƒ  â”£ ğŸ“œblockchain.py
 â”ƒ  â”— ğŸ“œ__init__.py
 â”£ğŸ“¦datahandler
 â”ƒ  â”£ ğŸ“œdata_handler.py
 â”ƒ  â”£ ğŸ“œdata_requests_messages.py
 â”ƒ  â”£ ğŸ“œdata_sink.py
 â”ƒ  â”— ğŸ“œ__init__.py
 â”£ğŸ“¦encryption
 â”ƒ  â”£ ğŸ“œencryption.py
 â”ƒ  â”— ğŸ“œ__init__.py
 â”£ğŸ“¦evaluation
 â”ƒ  â”£ ğŸ“œcontract.py
 â”ƒ  â”£ ğŸ“œgraph_throughput.py
 â”ƒ  â”— ğŸ“œtest_throughput.py
 â”£ğŸ“¦multithreading
 â”ƒ  â”£ ğŸ“œmanaged_thread.py
 â”ƒ  â”£ ğŸ“œprotected_list.py
 â”ƒ  â”£ ğŸ“œthread_manager.py
 â”ƒ  â”— ğŸ“œ__init__.py
 â”£ğŸ“¦networking
 â”ƒ  â”£ ğŸ“œconfig.py
 â”ƒ  â”£ ğŸ“œmessages.py
 â”ƒ  â”£ ğŸ“œpeer_router.py
 â”ƒ  â”— ğŸ“œ__init__.py
 â”£ğŸ“¦tests
 â”ƒ  â”£ ğŸ“œcontract.py
 â”ƒ  â”£ ğŸ“œcontract_1.py
 â”ƒ  â”£ ğŸ“œcontract_2.py
 â”ƒ  â”£ ğŸ“œsum_contract.py
 â”ƒ  â”£ ğŸ“œtest_attackers.py
 â”ƒ  â”£ ğŸ“œtest_bevali.py
 â”ƒ  â”£ ğŸ“œtest_block.py
 â”ƒ  â”£ ğŸ“œtest_blockchain.py
 â”ƒ  â”£ ğŸ“œtest_contracts.py
 â”ƒ  â”£ ğŸ“œtest_datahandler.py
 â”ƒ  â”£ ğŸ“œtest_encryption.py
 â”ƒ  â”£ ğŸ“œtest_networking.py
 â”ƒ  â”£ ğŸ“œtest_transactions.py
 â”ƒ  â”— ğŸ“œ__init__.py
 â”£ğŸ“¦transactions
 â”ƒ  â”£ ğŸ“œtransaction.py
 â”ƒ  â”— ğŸ“œ__init__.py
 â”£ ğŸ“œ.gitignore
 â”£ ğŸ“œbitbucket-pipelines.yml
 â”£ ğŸ“œconftest.py
 â”£ ğŸ“œMakefile
 â”£ ğŸ“œreadme.md
 â”£ ğŸ“œrequirements.txt
 â”— ğŸ“œtimelog.md
```

## Build instructions

### Requirements


* Python 3.10
* Make
* Packages: listed in `requirements.txt` 
* Tested on Windows 10, Linux Mint 18, MacOS Big Sir



### Build steps

* Building the software is done via the make file.
* If you have trouble with the installation, it's due to this make file.
* It attempts to install on windows and unix based system but it is only tested properly on the OSs described above.
* Run these commands:

```
    $: make install
```

### Test steps

To run automated testing run this command
```
    $: make test
```

### Evaluation Steps

To produce throughput analysis results, run this command. <br />
`note:` There is a known bug on windows that causes the evaluation to sometimes stop. The solution is to restart the evaluation, changing the parmeters that were missed.
```
    $: make evaluate
```

### Clean Step

To clean the repo, run this command
```
    $: make clean
```
